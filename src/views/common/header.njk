<!-- header -->
<script src={{"header.js" | assets}}></script>
<link rel="preload" :href="data.app.logoUrl" as="image">

<div
  style="z-index: 100;"
  class="sticky flex top-0 flex-col gap-8 shadow-mainColor w-full"
  x-data="xDataHeader(data?.lists?.header)"
  x-init="init()"
  @resize.window.debounce.100="updateItems()"
>
  <div style="height: 69px;" class="w-full bg-white flex items-center py-3 z-100">
    <div class="flex items-center gap-8 justify-between container">
      <div class="flex gap-8 flex-1">
        <div class="flex items-center gap-3">
          <i
            q-toggle="sidebar"
            class="hidden-lg text-mainColor cursor-pointer flex items-center text-3xl fi fi-rr-menu-burger"
          ></i>
          <a aria-label="لوجو الرئيسي" class="rounded-full w-max" href="/">
            <img class="h-[45px] object-contain" :src="data.app.logoUrl" alt="Logo" />
          </a>
        </div>

        <div class="flex un-hidden-lg header-lists flex-1 justify-start items-center gap-10 relative">
          <!-- القائمة الأولى (العناصر المرئية) -->
          <template x-for="(item, index) in visibleItems" :key="index">
            <a
              aria-label="item header lists"
              :href="item?.url"
              :class="item.class"
              class="rounded-md text-customBlack text-nowrap font-bold"
              x-text="item.title"
              x-ref="headerItem"
            ></a>
          </template>

          <!-- القائمة المنسدلة -->
          <div x-show="dropdownItems.length > 0" x-data="{ open: false }" class="relative">
            <button @click="open = !open" class="text-customBlack font-bold">
              <div class="flex items-center gap-3">
                المزيد
                <i class="fi fi-rr-caret-down"></i>
              </div>
            </button>

            <div
              x-show="open"
              @click.outside="open = false"
              class="absolute right-0 mt-2 min-w-28 bg-white border rounded-md shadow-lg z-50"
            >
              <template x-for="item in dropdownItems" :key="item.title">
                <a
                  aria-label="dropdown item"
                  :href="item?.url"
                  :class="item.class"
                  class="block px-4 py-2 text-customBlack text-nowrap hover:bg-gray-100"
                  x-text="item.title"
                ></a>
              </template>
            </div>
          </div>
        </div>
      </div>

      <div class="flex gap-3 md:gap-6 items-center">
        <div class="w-max">
          <div q-toggle="search" :style="`background-color: ${data.app.settings.mainColor}1F`"
            class="cursor-pointer group hover:scale-105 transition-all duration-300 rounded-full w-[45px] h-[45px] flex items-center justify-center">
            <i class="fi flex items-center text-[20px] text-mainColor fi-rr-search"></i>
          </div>
        </div>
        <div class="w-max">
          <div q-toggle="cart" :style="`background-color: ${data.app.settings.mainColor}1F`"
            class="cursor-pointer group hover:scale-105 transition-all duration-300 rounded-full w-[45px] h-[45px] flex items-center justify-center relative">
            <i class="fi text-[20px] text-mainColor flex items-center fi-rr-shopping-cart"></i>
            <span x-text="cart?.items ? cart?.items.length : 0" class="text-white absolute top-0 right-0 transform translate-x-[3%] translate-y-0 w-[14px] h-[14px]
            text-[10px] rounded-full flex items-center justify-center bg-mainColor">
              0
            </span>
          </div>
        </div>
        <div class="w-max">
          <qumra-user-menu iconsize="20px" :iconcolor="data.app.settings.mainColor"></qumra-user-menu>
        </div>
      </div>
    </div>
  </div>
</div>